<!doctype html>
<html ng-app="todomvc" lang="en">
	<head>
		<meta charset="utf-8">
		<title>Myeongjoon's Web</title>
		<link rel="stylesheet" href="bower_components/todomvc-common/base.css">
		<link rel="stylesheet" href="bower_components/todomvc-common/style.css">
		<link rel="stylesheet" href="bower_components/todomvc-common/lol_home.css">
		<style>[ng-cloak] { display: none; }</style>
		<script src="bower_components/todomvc-common/base.js"></script>
		<script src="bower_components/angular/angular.js"></script>
		<script src="bower_components/angular-route/angular-route.js"></script>
		<script src="js/services/todoStorage.js"></script>
		<script src="js/controllers/todoCtrl.js"></script>
		<script src="js/directives/todoFocus.js"></script>
		<script src="js/directives/todoEscape.js"></script>
		<script type="text/javascript">//<![CDATA[

var sumName = "";

function summonerLookUp() {
    var SUMMONER_NAME = "";
    SUMMONER_NAME = $("#userName").val();

    var API_KEY = "2c8415cb-53b2-488d-85f2-b1b9d97be2b2";

    if (SUMMONER_NAME !== "") {

        $.ajax({
            url: 'https://kr.api.pvp.net/api/lol/kr/v1.4/summoner/by-name/' + SUMMONER_NAME + '?api_key=' + API_KEY,
            type: 'GET',
            dataType: 'json',
            data: {

            },
            success: function (json) {
                var SUMMONER_NAME_NOSPACES = SUMMONER_NAME.replace(" ", "");

                SUMMONER_NAME_NOSPACES = SUMMONER_NAME_NOSPACES.toLowerCase().trim();

                summonerLevel = json[SUMMONER_NAME_NOSPACES].summonerLevel;
                summoner_ID = json[SUMMONER_NAME_NOSPACES].id;

                document.getElementById("summoner_level").innerHTML = "레벨 : " +summonerLevel;
                //document.getElementById("sID").innerHTML = summonerID;
                
                sumName = json[SUMMONER_NAME_NOSPACES].name;
				getMyleagueEntry(summoner_ID);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("error summonerLookUp()");
            }
        });
    } else {}
}

function Name() {
    alert(sumName);
}

function getMyleagueEntry(summonerID) {

    var API_KEY = "2c8415cb-53b2-488d-85f2-b1b9d97be2b2";

    if (summonerID !== "") {

        $.ajax({
            url: 'https://kr.api.pvp.net/api/lol/kr/v2.5/league/by-summoner/' + summonerID + '/entry?api_key=2c8415cb-53b2-488d-85f2-b1b9d97be2b2',
            type: 'GET',
            dataType: 'json',
            data: {

            },
            success: function (json) {

                summoner_tier = (json[summonerID])[0].tier;
				summoner_division = ((json[summonerID])[0]).entries[0].division;
				//summoner_division = summoner_entry.division;
                document.getElementById("summoner_tier").innerHTML = "티어 : " +summoner_tier+" "+summoner_division;
                //document.getElementById("sID").innerHTML = summonerID;
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("error getMyleagueEntry");
            }
        });
    } else {}
}









//]]> 

</script>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
	</head>
	<body ng-controller="todoCtrl" id="todomvc-index.html">
		<section id="todoapp">
			<header id="header">
				<h1>롤 전적 검색</h1>
				<form id="todo-form">
					<input id="userName" placeholder="아이디를 입력하시오." ng-model="newTodo" autofocus>
					<script type="text/javascript">
				// Using jQuery.
				$(function() {
					$('form').each(function() {
						$(this).find('input').keypress(function(e) {
							// Enter pressed?
							if(e.which == 10 || e.which == 13) {
								summonerLookUp();
							}
						});

						$(this).find('input[type=submit]').hide();
					});
				});
				</script>
				</form>
			</header>
			<ul id="lol_information">
					<li id="summoner_level">레벨
					</li>
					<li id="summoner_tier">티어
					</li>
			</ul>
			<footer id="footer" ng-show="todos.length" ng-cloak>
				<span id="todo-count"><strong>{{remainingCount}}</strong>
					<ng-pluralize count="remainingCount" when="{ one: 'item left', other: 'items left' }"></ng-pluralize>
				</span>
				<button id="clear-completed" ng-click="clearCompletedTodos()" 
					ng-show="completedCount">Clear completed ({{completedCount}})</button>
			</footer>
		</section>
		<footer id="info">
			<ul class="social">
				<li>
					<a href="http://blog.naver.com/itkmj">Naver blog</a>
				</li>
				<li>
					<a href="https://www.facebook.com/profile.php?id=100004756213783">Facebook</a>
				</li>	
				<li>
					<a href="https://plus.google.com/u/0/107614993603448426456">Google+</a>
				</li>
				<li>
					<a href="https://github.com/Myeongjoon">Github</a>
				</li>
			</ul>
	</footer>
	</body>
</html>
